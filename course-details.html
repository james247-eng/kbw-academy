<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Course Details | Tech Wizards Academy</title>
  
  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="manifest" href="favicon/site.webmanifest">
  
  <!-- Ionicons -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <link rel="stylesheet" href="css/course-details.css">
</head>
<body>

  <!-- Loading Indicator -->
  <div id="page-loading">
    <div>
      <div class="spinner"></div>
      <p style="margin-top:20px; color:#6b7280;">Loading course...</p>
    </div>
  </div>

  <!-- Error Container -->
  <div id="error-container"></div>

  <!-- Hero Section -->
  <section class="hero" id="hero-section" style="display:none;">
    <div class="hero-content">
      <h1 id="course-title-hero">Course Title</h1>
      <p class="subtitle" id="course-subtitle">Course description</p>
      
      <div class="stats">
        <div class="stat-item">
          <span class="number" id="total-lessons">0</span>
          <span class="label">Video Lessons</span>
        </div>
        <div class="stat-item">
          <span class="number" id="enrolled-count">0</span>
          <span class="label">Students Enrolled</span>
        </div>
        <div class="stat-item">
          <span class="number" id="course-level">Beginner</span>
          <span class="label">Level</span>
        </div>
      </div>

      <button class="btn btn-primary enroll-btn">
        <ion-icon name="rocket-outline"></ion-icon>
        Enroll Now - <span class="course-price">‚Ç¶0</span>
      </button>
    </div>
  </section>

  <!-- Course Meta Info -->
  <section id="meta-section" style="display:none;">
    <h2>Course Information</h2>
    <div class="course-meta">
      <div class="meta-card">
        <h3>Price</h3>
        <p class="course-price">‚Ç¶0</p>
      </div>
      <div class="meta-card">
        <h3>Category</h3>
        <p id="course-category">General</p>
      </div>
      <div class="meta-card">
        <h3>Instructor</h3>
        <p id="course-instructor">Tech Wizards</p>
      </div>
      <div class="meta-card">
        <h3>Duration</h3>
        <p id="course-duration">Self-paced</p>
      </div>
    </div>
    
    <div style="margin-top:40px; padding:30px; background:#f9fafb; border-radius:16px; border-left:4px solid #14b8a6;">
      <h3 style="margin-bottom:15px; color:#1a1f36;">About This Course</h3>
      <p id="course-description" style="color:#4b5563; line-height:1.8; font-size:1.1rem;">
        Loading description...
      </p>
    </div>
  </section>

  <!-- Course Curriculum -->
  <section class="curriculum" id="curriculum-section" style="display:none;">
    <h2>What You'll Learn</h2>
    <div id="curriculum-list">
      <!-- Will be populated by JavaScript -->
    </div>
    
    <div style="text-align:center; margin-top:40px;">
      <button class="btn btn-primary enroll-btn">
        <ion-icon name="school-outline"></ion-icon>
        Enroll Now - <span class="course-price">‚Ç¶0</span>
      </button>
    </div>
  </section>

  <!-- Scripts -->
  <script type="module">
    import { initCoursePage } from '/js/single-course-handler.js';
    
    // Get course ID from URL parameter
    const urlParams = new URLSearchParams(window.location.search);
    const courseId = urlParams.get('id');
    
    if (!courseId) {
      // No course ID provided, redirect to courses page
      console.error('‚ùå No course ID in URL');
      document.getElementById('page-loading').style.display = 'none';
      document.getElementById('error-container').innerHTML = `
        <div style="text-align:center; padding:100px 20px;">
          <ion-icon name="alert-circle-outline" style="font-size:5rem; color:#ef4444;"></ion-icon>
          <h2 style="color:#1a1f36; margin:20px 0;">No Course Selected</h2>
          <p style="color:#6b7280; margin-bottom:30px;">Please select a course from the catalog</p>
          <a href="/all-courses.html" style="display:inline-block; padding:14px 30px; background:#14b8a6; color:white; text-decoration:none; border-radius:8px; font-weight:600;">
            View All Courses
          </a>
        </div>
      `;
      document.getElementById('error-container').style.display = 'block';
    } else {
      // Initialize course page with the ID
      console.log('üöÄ Loading course:', courseId);
      
      // Show sections after loading
      setTimeout(() => {
        document.getElementById('hero-section').style.display = 'block';
        document.getElementById('meta-section').style.display = 'block';
        document.getElementById('curriculum-section').style.display = 'block';
      }, 100);
      
      initCoursePage(courseId);
    }
  </script>

</body>
</html>