<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Course Viewer - Tech Wizards Academy</title>
  <link rel="stylesheet" href="./css/course-viewer.css">
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

  <!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1605167704195649');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1605167704195649&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->
  <link rel="stylesheet" href="css/install.css">`n  <script src="js/pwa.js" defer></script>`n  <script src="js/pwa-install-ui.js" defer></script>`n</head>
<body>`n  <div class="pwa-install-prompt" id="pwaInstallPrompt" style="display: none;">`n    <img src="/favicon/android-chrome-192x192.png" alt="Tech Wizards Academy" style="width: 32px; height: 32px;">`n    <div style="flex-grow: 1;">`n      <p style="margin: 0 0 4px 0; font-weight: 600;">Install Tech Wizards Academy</p>`n      <p style="margin: 0; font-size: 14px; opacity: 0.8;">Get quick access to courses on your device</p>`n    </div>`n    <button onclick="installPWA()" style="background: #667eea; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">Install</button>`n    <button onclick="closePWAPrompt()" class="close-install-btn">&times;</button>`n  </div>`n
  <!-- Header -->
  <header class="viewer-header">
    <div class="header-content">
      <div class="logo">
        <a href="dashboard.html">
          <ion-icon name="arrow-back-outline"></ion-icon>
          Back to Dashboard
        </a>
      </div>
      <h1 class="course-title" id="course-title">Loading...</h1>
      <div class="header-actions">
        <span class="progress-badge" id="progress-badge">0% Complete</span>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <div class="viewer-container">
    <!-- Video Player Section -->
    <div class="video-section">
      <div class="video-container" id="video-container">
        <div class="video-placeholder">
          <ion-icon name="play-circle-outline"></ion-icon>
          <p>Select a lesson to start</p>
        </div>
      </div>

      <!-- Video Controls -->
      <div class="video-info">
        <h2 id="current-lesson-title">Select a lesson to begin</h2>
        <p id="current-lesson-description"></p>
        
        <div class="lesson-actions">
          <button class="btn btn-primary" id="mark-complete-btn" style="display:none;">
            <ion-icon name="checkmark-circle-outline"></ion-icon>
            Mark as Complete
          </button>
          <button class="btn btn-secondary" id="next-lesson-btn" style="display:none;">
            Next Lesson
            <ion-icon name="arrow-forward-outline"></ion-icon>
          </button>
        </div>
      </div>
    </div>

    <!-- Lessons Sidebar -->
    <aside class="lessons-sidebar">
      <div class="sidebar-header">
        <h3>Course Content</h3>
        <span class="lesson-count" id="lesson-count">0 Lessons</span>
      </div>
      
      <div class="lessons-list" id="lessons-list">
        <!-- Lessons will be loaded here -->
        <div class="loading-state">
          <ion-icon name="hourglass-outline"></ion-icon>
          <p>Loading lessons...</p>
        </div>
      </div>

      <!-- Certificate Section -->
      <div class="certificate-section" id="certificate-section" style="display:none;">
        <div class="certificate-banner">
          <ion-icon name="trophy-outline"></ion-icon>
          <h4>Course Complete!</h4>
          <p>Congratulations on finishing</p>
          <button class="btn btn-success" id="view-certificate-btn">
            <ion-icon name="ribbon-outline"></ion-icon>
            View Certificate
          </button>
        </div>
      </div>
    </aside>
  </div>

  <!-- Certificate Modal -->
  <div class="certificate-modal" id="certificate-modal">
    <div class="certificate-overlay" onclick="closeCertificate()"></div>
    <div class="certificate-content">
      <button class="close-btn" onclick="closeCertificate()">
        <ion-icon name="close-outline"></ion-icon>
      </button>
      
      <div class="certificate-card" id="certificate-card">
        <!-- Certificate will be generated here -->
      </div>
      
      <div class="certificate-actions">
        <button class="btn btn-primary" onclick="downloadCertificate()">
          <ion-icon name="download-outline"></ion-icon>
          Download Certificate
        </button>
        <button class="btn btn-secondary" onclick="shareCertificate()">
          <ion-icon name="share-social-outline"></ion-icon>
          Share
        </button>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loading-overlay">
    <div class="spinner"></div>
    <p>Loading course...</p>
  </div>


  <script type="module" src="js/course-viewer.js"></script>
</body>
</html>
